@using Basyc.MessageBus.Manager.Presentation.BlazorLibrary.Pages.Requests.RequestHistory
@using Basyc.MessageBus.Manager.Presentation.BlazorLibrary.Pages.Requests.SideBar
@using Basyc.MessageBus.Manager.Presentation.BlazorLibrary.Pages.Requests.RequestSideBar

<HeadContent>
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
</HeadContent>

<busManager>
    <MudThemeProvider />
    <MudDialogProvider />
    <MudSnackbarProvider />

    <sideBar>
        <RequestsSideMenu DomainInfoViewModel="DomainInfoViewModel" RequestSelected="newSelected=>SelectedRequestViewModel = newSelected" />
    </sideBar>
    <requestFormPage>
        @if (SelectedRequestViewModel is not null)
        {
            <RequestSideBarView SelectedRequestViewModel="SelectedRequestViewModel" Requested="@(async (requestItem)=>await SendMessage(requestItem))" />
        }
        else
        {
            @:Select request
        }
    </requestFormPage>
    <historyPage>
        @if (SelectedRequestViewModel is not null)
        {
            <RequestHistoryView RequestResults="resultHistory[SelectedRequestViewModel]" />
        }
        else
        {
            @:Select request
        }
    </historyPage>
</busManager>
