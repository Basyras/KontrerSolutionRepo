@using Basyc.MessageBus.Manager.Application
@using Basyc.MessageBus.Manager.Application.ResultDiagnostics
@using Basyc.MessageBus.Manager.Presentation.BlazorLibrary.Pages.ResultHistory.ResultHistoryItem
@inject IRequestDiagnosticsManager resultLoggingManager;


<historyView>
    @if (RequestResults is not null)
    {
        int resultCounter = 0;
        @foreach (var result in RequestResults)
        {
            var diagnosticsContext = resultLoggingManager.GetContext(result);
            <item>
                <ResultHistoryItemView RequestResult="result" DiagnosticsContext="diagnosticsContext" OrderIndex="++resultCounter" />
            </item>
        }
    }
    else
    {
        @:empty history
    }
</historyView>

@code {
    [Parameter] public List<RequestResultContext> RequestResults { get; set; }
    private RequestResultContext selectedRequestResults;

    [Parameter]
    public RequestResultContext SelectedRequestResults
    {
        get => selectedRequestResults;
        set
        {
            if (value == selectedRequestResults) return;
            selectedRequestResults = value;
        }
    }

}
